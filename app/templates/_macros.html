{% macro render_account_options(accounts, selected_id=None) %}
    {% for account_id, account_name, level in accounts %}
        <option value="{{ account_id }}" {% if selected_id == account_id %}selected{% endif %}>
            {% for i in range(level|int * 4) %}&nbsp;{% endfor %}{{ account_name }}
        </option>
    {% endfor %}
{% endmacro %}

{% macro render_account_row(account, level=0) %}
<tr data-id="{{ account.id }}" data-parent-id="{{ account.parent_id }}" class="account-row {% if level > 0 %}child-row-{{ account.parent_id }} d-none{% endif %}">
    <td style="padding-left: {{ level * 25 }}px;">
        {% if account.children.count() > 0 %}
            <i class="bi bi-chevron-right toggle-children" style="cursor: pointer;"></i>
        {% endif %}
        {{ account.name }}
    </td>
    <td>{{ account.type }}</td>
    <td>{{ account.category }}</td>
    <td>
        <a href="{{ url_for('accounts.edit_account', account_id=account.id) }}" class="btn btn-sm btn-primary">Edit</a>
        <a href="{{ url_for('accounts.delete_account', account_id=account.id) }}" class="btn btn-sm btn-danger" onclick="return confirm('Are you sure you want to delete this account and all of its children?')">Delete</a>
    </td>
</tr>
{% endmacro %}
