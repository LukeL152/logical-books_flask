{% extends 'base.html' %}

{% block title %}Client Details - Logical Books{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center">
        <h2>Client Details</h2>
        <div>
            <a href="{{ url_for('clients.edit_client', client_id=client.id) }}" class="btn btn-primary">Edit Client</a>
            <a href="{{ url_for('clients.clients') }}" class="btn btn-secondary">Back to List</a>
        </div>
    </div>
    <hr>
    <div class="card">
        <div class="card-header">
            <h3>{{ client.business_name }}</h3>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-6">
                    <p><strong>Contact Name:</strong> {{ client.contact_name }}</p>
                    <p><strong>Contact Email:</strong> {{ client.contact_email }}</p>
                    <p><strong>Contact Phone:</strong> {{ client.contact_phone }}</p>
                    <p><strong>Address:</strong><br>{{ client.address | nl2br }}</p>
                </div>
                <div class="col-md-6">
                    <p><strong>Entity Structure:</strong> {{ client.entity_structure }}</p>
                    <p><strong>Billing Cycle:</strong> {{ client.billing_cycle }}</p>
                    <p><strong>Payment Method:</strong> {{ client.payment_method }}</p>
                    <p><strong>Status:</strong> <span class="badge bg-{% if client.client_status == 'Active' %}success{% elif client.client_status == 'Inactive' %}warning{% else %}info{% endif %}">{{ client.client_status }}</span></p>
                </div>
            </div>
            <hr>
            <h4>Services Offered</h4>
            <p>{{ client.services_offered | nl2br }}</p>
            <hr>
            <h4>Notes</h4>
            <p>{{ client.notes | nl2br }}</p>
        </div>
    </div>

    <div class="card mt-4">
        <div class="card-header">
            <h3>Plaid Integration</h3>
        </div>
        <div class="card-body">
        </div>
</div>

-->

<script>
// document.getElementById('send-plaid-link-form').addEventListener('submit', async function(event) {
//     event.preventDefault();
//     const phoneNumber = document.getElementById('phone-number').value;
//     const clientId = {{ client.id }};
//     const statusDiv = document.getElementById('plaid-link-status');
// 
//     statusDiv.innerHTML = '<div class="spinner-border text-primary" role="status"><span class="visually-hidden">Loading...</span></div>';
// 
//     try {
//         const response = await fetch('/api/create_link_token_sms', {
//             method: 'POST',
//             headers: {
//                 'Content-Type': 'application/json',
//             },
//             body: JSON.stringify({
//                 client_id: clientId,
//                 phone_number: phoneNumber,
//             }),
//         });
// 
//         if (response.ok) {
//             const data = await response.json();
//             statusDiv.innerHTML = '<div class="alert alert-success" role="alert">Successfully sent Plaid link to ' + phoneNumber + '.</div>';
//         } else {
//             const errorData = await response.json();
//             statusDiv.innerHTML = '<div class="alert alert-danger" role="alert">Error sending Plaid link: ' + (errorData.display_message || errorData.error_message || 'Unknown error') + '</div>';
//         }
//     } catch (error) {
//         statusDiv.innerHTML = '<div class="alert alert-danger" role="alert">An unexpected error occurred.</div>';
//         console.error('Error:', error);
//     }
// });


{% endblock %}