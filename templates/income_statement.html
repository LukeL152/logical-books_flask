{% extends "base.html" %}
{% block content %}
    <h1 class="mb-4">Income Statement</h1>

    <table class="table table-striped">
        <thead>
            <tr>
                <th>Category</th>
                <th class="text-end">Amount</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td colspan="2"><strong>Revenue</strong></td>
            </tr>
            {% for item in revenue %}
            <tr>
                <td>{{ item.category }}</td>
                <td class="text-end">{{ "%.2f"|format(item.total) }}</td>
            </tr>
            {% endfor %}
            <tr class="table-primary">
                <td><strong>Total Revenue</strong></td>
                <td class="text-end"><strong>{{ "%.2f"|format(total_revenue) }}</strong></td>
            </tr>
            <tr>
                <td colspan="2"><strong>Cost of Goods Sold</strong></td>
            </tr>
            <tr>
                <td>COGS</td>
                <td class="text-end">{{ "%.2f"|format(cogs) }}</td>
            </tr>
            <tr class="table-primary">
                <td><strong>Gross Profit</strong></td>
                <td class="text-end"><strong>{{ "%.2f"|format(gross_profit) }}</strong></td>
            </tr>
            <tr>
                <td>Gross Profit Margin</td>
                <td class="text-end">{{ "%.2f"|format(gross_profit_margin) }}%</td>
            </tr>
            <tr>
                <td colspan="2"><strong>Operating Expenses</strong></td>
            </tr>
            {% for item in expenses %}
            {% if item.category != 'COGS' %}
            <tr>
                <td>{{ item.category }}</td>
                <td class="text-end">{{ "%.2f"|format(item.total) }}</td>
            </tr>
            {% endif %}
            {% endfor %}
            <tr class="table-primary">
                <td><strong>Total Operating Expenses</strong></td>
                <td class="text-end"><strong>{{ "%.2f"|format(operating_expenses) }}</strong></td>
            </tr>
            <tr class="table-success">
                <td><strong>Operating Income</strong></td>
                <td class="text-end"><strong>{{ "%.2f"|format(operating_income) }}</strong></td>
            </tr>
            <tr>
                <td>Operating Profit Margin</td>
                <td class="text-end">{{ "%.2f"|format(operating_profit_margin) }}%</td>
            </tr>
            <tr class="table-success">
                <td><strong>Net Income</strong></td>
                <td class="text-end"><strong>{{ "%.2f"|format(net_income) }}</strong></td>
            </tr>
            <tr>
                <td>Net Profit Margin</td>
                <td class="text-end">{{ "%.2f"|format(net_profit_margin) }}%</td>
            </tr>
        </tbody>
    </table>
{% endblock %}